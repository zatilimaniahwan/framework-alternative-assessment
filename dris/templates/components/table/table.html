{% load shared_extras %}
<link rel="stylesheet" href="https://cdn.datatables.net/1.13.7/css/dataTables.bootstrap5.min.css"/>
<script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
<script src="https://cdn.datatables.net/1.13.7/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.13.7/js/dataTables.bootstrap5.min.js"></script>

<table id="datatable" class="table table-striped table-bordered">
  <thead>
    <tr>
      <th>#</th>
      {% for col in columns %}
        <th>{{ col.label }}</th>
      {% endfor %}
    </tr>
  </thead>
 <tbody>
    {% for row in data %}
      <tr>
        <th scope="row">{{ forloop.counter }}</th>
        {% for col in columns %}
          <td>
            {% if col.type == "action" %}
              {% for action in col.actions %}
                {% if action.label == "Edit" %}
                  <a href="?edit={{ row.id }}" class="btn btn-sm {{ action.class|default:'btn-primary' }}">Edit</a>
                {% else %}
                  <a href="" class="btn btn-sm {{ action.class|default:'btn-primary' }}">{{ action.label }}</a>
                {% endif %}
              {% endfor %}
            {% else %}
              {{ row|get_item:col.key }}
            {% endif %}
          </td>
        {% endfor %}
      </tr>
    {% endfor %}
</tbody>
</table>
<script>
  $(document).ready(function () {
    $('#datatable').DataTable();
  });
</script>